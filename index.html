<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心理健康自测评估</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            padding: 30px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }

        h1 {
            color: #5a67d8;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .subtitle {
            color: #718096;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .test-section {
            display: none;
        }

        .active-section {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .intro-text {
            text-align: center;
            padding: 20px 0;
            font-size: 1.2rem;
            color: #4a5568;
        }

        .btn {
            display: inline-block;
            background-color: #5a67d8;
            color: white;
            padding: 14px 30px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(90, 103, 216, 0.3);
        }

        .btn:hover {
            background-color: #4c51bf;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(90, 103, 216, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .question-container {
            margin: 30px 0;
        }

        .question {
            font-size: 1.4rem;
            margin-bottom: 25px;
            color: #2d3748;
            font-weight: 600;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            padding: 18px 20px;
            background-color: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            background-color: #edf2f7;
            border-color: #cbd5e0;
        }

        .option.selected {
            background-color: #e6fffa;
            border-color: #38b2ac;
            color: #234e52;
        }

        .option-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background-color: #e2e8f0;
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .option.selected .option-number {
            background-color: #38b2ac;
            color: white;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eaeaea;
        }

        .progress-container {
            margin: 30px 0;
        }

        .progress-bar {
            height: 12px;
            background-color: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background-color: #5a67d8;
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #718096;
        }

        .result-container {
            text-align: center;
            padding: 30px 20px;
        }

        .score-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background-color: #f7fafc;
            margin: 0 auto 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 8px solid;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .score-value {
            font-size: 3.5rem;
            font-weight: 800;
            line-height: 1;
        }

        .score-label {
            font-size: 1.2rem;
            color: #718096;
            margin-top: 5px;
        }

        .result-title {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #2d3748;
        }

        .result-description {
            font-size: 1.1rem;
            color: #4a5568;
            max-width: 700px;
            margin: 0 auto 25px;
            line-height: 1.7;
        }

        .suggestions {
            background-color: #f0fff4;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            text-align: left;
            border-left: 5px solid #38b2ac;
        }

        .suggestions h3 {
            color: #234e52;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .suggestions ul {
            padding-left: 20px;
        }

        .suggestions li {
            margin-bottom: 10px;
            color: #2d3748;
        }

        .warning {
            background-color: #fffaf0;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            border-left: 5px solid #ed8936;
            font-size: 0.95rem;
            color: #744210;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eaeaea;
            color: #718096;
            font-size: 0.9rem;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                border-radius: 15px;
            }

            h1 {
                font-size: 2rem;
            }

            .option {
                padding: 15px;
            }

            .score-circle {
                width: 150px;
                height: 150px;
            }

            .score-value {
                font-size: 2.8rem;
            }
        }

        /* 结果颜色分类 */
        .low-score {
            border-color: #38b2ac;
            color: #234e52;
        }

        .medium-score {
            border-color: #d69e2e;
            color: #744210;
        }

        .high-score {
            border-color: #e53e3e;
            color: #742a2a;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-brain"></i> 心理健康自测评估</h1>
            <p class="subtitle">本测试旨在帮助您了解当前的心理状态，提供参考建议，并非专业诊断。如有需要，请咨询专业心理健康服务人员。</p>
        </header>

        <!-- 介绍部分 -->
        <section id="intro-section" class="test-section active-section">
            <div class="intro-text">
                <p>欢迎参加心理健康自测评估！</p>
                <p>本测试包含10个问题，评估您最近两周的心理状态。</p>
                <p>请根据您的实际情况选择最符合的选项。所有回答将被保密。</p>
                <p>完成测试后，您将获得个性化评估结果和建议。</p>
                <p>测试大约需要5-8分钟完成。</p>
            </div>
            <div style="text-align: center;">
                <button id="start-test" class="btn">
                    <i class="fas fa-play-circle"></i> 开始测试
                </button>
            </div>
        </section>

        <!-- 测试部分 -->
        <section id="test-section" class="test-section">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-text">
                    <span id="current-question">1</span> / <span id="total-questions">10</span>
                </div>
            </div>

            <div class="question-container">
                <div class="question" id="question-text"></div>
                <div class="options" id="options-container"></div>
            </div>

            <div class="navigation">
                <button id="prev-btn" class="btn hidden">
                    <i class="fas fa-arrow-left"></i> 上一题
                </button>
                <button id="next-btn" class="btn">
                    下一题 <i class="fas fa-arrow-right"></i>
                </button>
                <button id="submit-test" class="btn hidden">
                    <i class="fas fa-paper-plane"></i> 提交测试
                </button>
            </div>
        </section>

        <!-- 结果部分 -->
        <section id="result-section" class="test-section">
            <div class="result-container">
                <div class="score-circle" id="score-circle">
                    <div class="score-value" id="score-value">0</div>
                    <div class="score-label">测试得分</div>
                </div>

                <h2 class="result-title" id="result-title"></h2>
                <p class="result-description" id="result-description"></p>

                <div class="suggestions">
                    <h3><i class="fas fa-lightbulb"></i> 个性化建议</h3>
                    <ul id="suggestions-list"></ul>
                </div>

                <div class="warning">
                    <p><strong>重要提示：</strong>本测试结果仅供参考，不能替代专业心理评估或诊断。如果您感到持续的情绪困扰或心理压力，建议咨询心理健康专业人士。</p>
                </div>

                <div style="margin-top: 30px;">
                    <button id="retake-test" class="btn">
                        <i class="fas fa-redo"></i> 重新测试
                    </button>
                </div>
            </div>
        </section>

        <footer>
            <p>© 2025 心理健康自测评估 | 本工具仅供自我了解参考</p>
            <p>如果您需要专业帮助，请拨打心理援助热线：12320</p>
        </footer>
    </div>

    <script>
        // 测试数据
        const testData = {
            title: "心理健康自测评估",
            questions: [
                {
                    text: "最近两周，您感到情绪低落、沮丧或绝望的频率如何？",
                    options: [
                        { text: "几乎没有", score: 0 },
                        { text: "偶尔（每周1-2天）", score: 1 },
                        { text: "经常（每周3-4天）", score: 2 },
                        { text: "几乎每天", score: 3 }
                    ]
                },
                {
                    text: "您是否对以往感兴趣的活动失去了兴趣或乐趣？",
                    options: [
                        { text: "完全没有", score: 0 },
                        { text: "有一点", score: 1 },
                        { text: "比较明显", score: 2 },
                        { text: "非常明显", score: 3 }
                    ]
                },
                {
                    text: "最近两周，您的睡眠状况如何？",
                    options: [
                        { text: "睡眠良好", score: 0 },
                        { text: "偶尔失眠或嗜睡", score: 1 },
                        { text: "经常失眠或嗜睡", score: 2 },
                        { text: "严重失眠或嗜睡", score: 3 }
                    ]
                },
                {
                    text: "您是否感到疲劳或精力不足？",
                    options: [
                        { text: "几乎没有", score: 0 },
                        { text: "偶尔", score: 1 },
                        { text: "经常", score: 2 },
                        { text: "几乎总是", score: 3 }
                    ]
                },
                {
                    text: "您的食欲或体重有明显变化吗？",
                    options: [
                        { text: "没有变化", score: 0 },
                        { text: "轻微变化", score: 1 },
                        { text: "明显变化", score: 2 },
                        { text: "极大变化", score: 3 }
                    ]
                },
                {
                    text: "您是否感到自责或无价值感？",
                    options: [
                        { text: "几乎没有", score: 0 },
                        { text: "偶尔", score: 1 },
                        { text: "经常", score: 2 },
                        { text: "几乎总是", score: 3 }
                    ]
                },
                {
                    text: "您集中注意力或做决定是否有困难？",
                    options: [
                        { text: "没有困难", score: 0 },
                        { text: "偶尔有困难", score: 1 },
                        { text: "经常有困难", score: 2 },
                        { text: "几乎无法集中注意力", score: 3 }
                    ]
                },
                {
                    text: "您是否感到不安、烦躁或易怒？",
                    options: [
                        { text: "几乎没有", score: 0 },
                        { text: "偶尔", score: 1 },
                        { text: "经常", score: 2 },
                        { text: "几乎总是", score: 3 }
                    ]
                },
                {
                    text: "您是否有过伤害自己或自杀的想法？",
                    options: [
                        { text: "从来没有", score: 0 },
                        { text: "偶尔想过但不会实施", score: 1 },
                        { text: "有时会认真考虑", score: 2 },
                        { text: "经常考虑或有计划", score: 3 }
                    ]
                },
                {
                    text: "您的日常生活和社交活动是否受到影响？",
                    options: [
                        { text: "没有影响", score: 0 },
                        { text: "轻微影响", score: 1 },
                        { text: "明显影响", score: 2 },
                        { text: "严重影响", score: 3 }
                    ]
                }
            ]
        };

        // 结果评估数据
        const resultData = {
            low: {
                title: "心理健康状况良好",
                description: "根据您的回答，您目前表现出较好的心理健康状态。您的情绪较为稳定，能够应对日常压力，并且保持积极的生活态度。",
                suggestions: [
                    "继续保持健康的生活方式，包括规律作息和均衡饮食",
                    "定期进行体育锻炼，有助于释放压力和维持情绪稳定",
                    "保持社交联系，与家人朋友保持良好沟通",
                    "培养兴趣爱好，为生活增添乐趣",
                    "学习压力管理技巧，为未来可能遇到的挑战做准备"
                ],
                colorClass: "low-score",
                scoreRange: [0, 10]
            },
            medium: {
                title: "存在轻微心理困扰",
                description: "根据您的回答，您可能正在经历一些心理困扰或压力。这些感受在许多人生活中都会出现，但值得关注并采取适当措施来改善。",
                suggestions: [
                    "尝试记录情绪日记，了解触发情绪变化的原因",
                    "练习放松技巧，如深呼吸、冥想或渐进性肌肉放松",
                    "与信任的朋友或家人分享您的感受",
                    "适当减少工作或学习负担，给自己休息时间",
                    "考虑与心理咨询师进行短暂交流，获得专业指导"
                ],
                colorClass: "medium-score",
                scoreRange: [11, 20]
            },
            high: {
                title: "需要关注心理健康",
                description: "根据您的回答，您可能正在经历明显的心理困扰。这些感受可能影响了您的日常生活。建议您认真对待这些信号，并考虑寻求专业支持。",
                suggestions: [
                    "强烈建议咨询心理健康专业人士进行评估",
                    "与家人或亲密朋友沟通您的状况，寻求支持",
                    "避免使用酒精或药物来处理情绪问题",
                    "建立规律的生活作息，保证充足睡眠",
                    "如有伤害自己的想法，请立即联系心理危机干预热线"
                ],
                colorClass: "high-score",
                scoreRange: [21, 30]
            }
        };

        // 应用状态
        let currentQuestion = 0;
        let userAnswers = [];
        let totalScore = 0;

        // DOM元素
        const introSection = document.getElementById('intro-section');
        const testSection = document.getElementById('test-section');
        const resultSection = document.getElementById('result-section');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressFill = document.getElementById('progress-fill');
        const currentQuestionElement = document.getElementById('current-question');
        const totalQuestionsElement = document.getElementById('total-questions');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitTestBtn = document.getElementById('submit-test');
        const startTestBtn = document.getElementById('start-test');
        const retakeTestBtn = document.getElementById('retake-test');
        const scoreCircle = document.getElementById('score-circle');
        const scoreValue = document.getElementById('score-value');
        const resultTitle = document.getElementById('result-title');
        const resultDescription = document.getElementById('result-description');
        const suggestionsList = document.getElementById('suggestions-list');

        // 初始化
        function initTest() {
            totalQuestionsElement.textContent = testData.questions.length;
            currentQuestion = 0;
            userAnswers = new Array(testData.questions.length).fill(null);
            totalScore = 0;
            updateProgress();
            showQuestion(currentQuestion);

            // 更新按钮状态
            updateNavigationButtons();
        }

        // 显示问题
        function showQuestion(index) {
            const question = testData.questions[index];
            questionText.textContent = `${index + 1}. ${question.text}`;

            // 清空选项容器
            optionsContainer.innerHTML = '';

            // 添加选项
            question.options.forEach((option, optionIndex) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                if (userAnswers[index] === optionIndex) {
                    optionElement.classList.add('selected');
                }

                optionElement.innerHTML = `
                    <div class="option-number">${String.fromCharCode(65 + optionIndex)}</div>
                    <div class="option-text">${option.text}</div>
                `;

                optionElement.addEventListener('click', () => {
                    selectOption(index, optionIndex);
                });

                optionsContainer.appendChild(optionElement);
            });

            // 更新当前问题显示
            currentQuestionElement.textContent = index + 1;

            // 更新进度条
            updateProgress();
        }

        // 选择选项
        function selectOption(questionIndex, optionIndex) {
            userAnswers[questionIndex] = optionIndex;

            // 更新UI
            const options = document.querySelectorAll('.option');
            options.forEach((option, idx) => {
                if (Math.floor(idx / testData.questions[questionIndex].options.length) === questionIndex) {
                    const relativeIndex = idx % testData.questions[questionIndex].options.length;
                    if (relativeIndex === optionIndex) {
                        option.classList.add('selected');
                    } else {
                        option.classList.remove('selected');
                    }
                }
            });

            // 启用下一题按钮
            if (currentQuestion < testData.questions.length - 1) {
                nextBtn.disabled = false;
            } else {
                submitTestBtn.classList.remove('hidden');
                nextBtn.classList.add('hidden');
            }
        }

        // 更新进度
        function updateProgress() {
            const progress = ((currentQuestion + 1) / testData.questions.length) * 100;
            progressFill.style.width = `${progress}%`;
        }

        // 更新导航按钮状态
        function updateNavigationButtons() {
            // 上一题按钮
            if (currentQuestion > 0) {
                prevBtn.classList.remove('hidden');
            } else {
                prevBtn.classList.add('hidden');
            }

            // 下一题按钮
            if (currentQuestion < testData.questions.length - 1) {
                nextBtn.classList.remove('hidden');
                submitTestBtn.classList.add('hidden');
            } else {
                nextBtn.classList.add('hidden');
                // 如果已回答最后一题，显示提交按钮
                if (userAnswers[currentQuestion] !== null) {
                    submitTestBtn.classList.remove('hidden');
                }
            }

            // 禁用下一题按钮如果当前问题未回答
            if (userAnswers[currentQuestion] === null) {
                nextBtn.disabled = true;
            } else {
                nextBtn.disabled = false;
            }
        }

        // 计算总分
        function calculateScore() {
            totalScore = 0;
            userAnswers.forEach((answerIndex, questionIndex) => {
                if (answerIndex !== null) {
                    totalScore += testData.questions[questionIndex].options[answerIndex].score;
                }
            });
            return totalScore;
        }

        // 显示结果
        function showResult() {
            const score = calculateScore();
            scoreValue.textContent = score;

            // 确定结果类型
            let resultType;
            if (score <= 10) {
                resultType = 'low';
            } else if (score <= 20) {
                resultType = 'medium';
            } else {
                resultType = 'high';
            }

            const result = resultData[resultType];

            // 更新结果UI
            resultTitle.textContent = result.title;
            resultDescription.textContent = result.description;

            // 更新分数圆圈
            scoreCircle.className = 'score-circle ' + result.colorClass;

            // 更新建议列表
            suggestionsList.innerHTML = '';
            result.suggestions.forEach(suggestion => {
                const li = document.createElement('li');
                li.textContent = suggestion;
                suggestionsList.appendChild(li);
            });

            // 显示结果部分
            switchSection('result');
        }

        // 切换部分
        function switchSection(section) {
            // 隐藏所有部分
            introSection.classList.remove('active-section');
            testSection.classList.remove('active-section');
            resultSection.classList.remove('active-section');

            // 显示目标部分
            if (section === 'intro') {
                introSection.classList.add('active-section');
            } else if (section === 'test') {
                testSection.classList.add('active-section');
            } else if (section === 'result') {
                resultSection.classList.add('active-section');
            }
        }

        // 事件监听器
        startTestBtn.addEventListener('click', () => {
            initTest();
            switchSection('test');
        });

        prevBtn.addEventListener('click', () => {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
                updateNavigationButtons();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestion < testData.questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
                updateNavigationButtons();
            }
        });

        submitTestBtn.addEventListener('click', () => {
            // 检查是否所有问题都已回答
            const unanswered = userAnswers.some(answer => answer === null);
            if (unanswered) {
                alert('请回答所有问题后再提交');
                return;
            }
            showResult();
        });

        retakeTestBtn.addEventListener('click', () => {
            initTest();
            switchSection('intro');
        });

        // 初始化
        initTest();
        switchSection('intro');
    </script>
</body>
</html>
